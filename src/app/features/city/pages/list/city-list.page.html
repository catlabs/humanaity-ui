<div class="city-list-page">
  <div class="city-list-page__header">
    <div class="city-list-page__title-section">
      <h1 class="city-list-page__title">Your Simulations</h1>
      <p class="city-list-page__subtitle">Manage and run your simulation projects</p>
    </div>
    <button
      mat-raised-button
      color="primary"
      (click)="onCreateNew()"
      class="city-list-page__new-button"
    >
      <mat-icon>add</mat-icon>
      <span>New Simulation</span>
    </button>
  </div>

  <div class="city-list-page__filters">
    <div class="city-list-page__filter-bar">
      <button 
        class="city-list-page__filter-button"
        [class.is-active]="activeFilter === 'all'"
        (click)="onFilterChange('all')"
      >
        All Simulations
      </button>
      <button 
        class="city-list-page__filter-button"
        [class.is-active]="activeFilter === 'running'"
        (click)="onFilterChange('running')"
      >
        Running
      </button>
      <button 
        class="city-list-page__filter-button"
        [class.is-active]="activeFilter === 'completed'"
        (click)="onFilterChange('completed')"
      >
        Completed
      </button>
      <button 
        class="city-list-page__filter-button"
        [class.is-active]="activeFilter === 'draft'"
        (click)="onFilterChange('draft')"
      >
        Draft
      </button>
    </div>
  </div>

  <div class="city-list-page__grid">
    @for (simulation of getPaginatedCities(); track simulation.id) {
      <app-simulation-card 
        [simulation]="simulation"
        (cardClick)="onCardClick($event)">
      </app-simulation-card>
    } @empty {
      <div class="city-list-page__empty">
        <mat-icon>inbox</mat-icon>
        <p>No simulations found</p>
      </div>
    }
  </div>

  @if (filteredCities().length > pageSize) {
    <mat-paginator
      [length]="filteredCities().length"
      [pageSize]="pageSize"
      [pageIndex]="currentPage"
      [pageSizeOptions]="[9, 18, 27]"
      (page)="onPageChange($event)"
      class="city-list-page__paginator">
    </mat-paginator>
  }
</div>
