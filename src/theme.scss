@use "@angular/material" as mat;

// We are fully on Material v3 token-based theming.
// (Project rule: no Material M2 theming; this file defines v3 tokens only.)

// Brand palettes (Material v3 tonal palettes).
// If you want a different hue, swap these palettes (e.g. mat.$azure-palette).
$primary: mat.$blue-palette;
$tertiary: mat.$cyan-palette;

@function create-theme($type) {
  @return mat.define-theme(
    (
      color: (
        theme-type: $type,
        primary: $primary,
        tertiary: $tertiary,
        use-system-variables: true,
      ),
      typography: (
        use-system-variables: true,
        // Use Inter across Material's typography tokens.
        // (Inter is loaded globally in src/styles.scss)
        plain-family:
          (
            Inter,
            Roboto,
            "Helvetica Neue",
            sans-serif,
          ),
        brand-family: (
          Inter,
          Roboto,
          "Helvetica Neue",
          sans-serif,
        ),
      ),
      density: (
        scale: 0,
      ),
    )
  );
}

$light-theme: create-theme(light);
$dark-theme: create-theme(dark);

// Default: light theme tokens + component theming.
:root {
  color-scheme: light;
  @include mat.all-component-themes($light-theme);
  @include mat.system-level-colors($light-theme);
  @include mat.system-level-typography($light-theme);

  // Typography override: make global <h2> smaller.
  // In Material v3, mat.typography-hierarchy() uses `font: var(--mat-sys-display-medium)`.
  // Override the shorthand token directly so the hierarchy picks it up.
  @include mat.theme-overrides(
    (
      display-medium: 400 24px/32px var(--mat-sys-display-medium-font),
      display-medium-size: 24px,
      display-medium-line-height: 32px,
    )
  );

  // Brand override: keep historical Humanaity primary (#2563eb).
  // These tokens are consumed by Angular Material *and* Tailwind (via tailwind.config.cjs).
  --mat-sys-primary: #2563eb;
  --mat-sys-on-primary: #ffffff;
  --mat-sys-primary-container: #dbeafe;
  --mat-sys-on-primary-container: #1e3a8a;
  --mat-sys-inverse-primary: #93c5fd;
  // Used for elevation overlays / tinted surfaces in M3.
  --mat-sys-surface-tint: #2563eb;
  // "Fixed" roles are used by some M3 component variants and states.
  --mat-sys-primary-fixed: #dbeafe;
  --mat-sys-on-primary-fixed: #1e3a8a;
  --mat-sys-primary-fixed-dim: #93c5fd;
  --mat-sys-on-primary-fixed-variant: #1e40af;

  @include mat.sidenav-overrides(
    (
      container-background-color: var(--mat-sys-surface-container-low),
    )
  );
}

// Dark theme overrides are activated by toggling `html.dark`.
html.dark {
  color-scheme: dark;
  @include mat.all-component-colors($dark-theme);
  @include mat.system-level-colors($dark-theme);

  // Dark-mode brand override. Keep primary the same brand color, but use a deeper container.
  --mat-sys-primary: #2563eb;
  --mat-sys-on-primary: #ffffff;
  --mat-sys-primary-container: #1e40af;
  --mat-sys-on-primary-container: #dbeafe;
  --mat-sys-inverse-primary: #93c5fd;
  --mat-sys-surface-tint: #2563eb;
  --mat-sys-primary-fixed: #dbeafe;
  --mat-sys-on-primary-fixed: #1e3a8a;
  --mat-sys-primary-fixed-dim: #93c5fd;
  --mat-sys-on-primary-fixed-variant: #1e40af;

  @include mat.sidenav-overrides(
    (
      container-background-color: var(--mat-sys-surface),
    )
  );
}

@include mat.typography-hierarchy($light-theme);
